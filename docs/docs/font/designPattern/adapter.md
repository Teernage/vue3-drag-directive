# 适配器模式

## 什么是适配器模式 ?

适配器模式是一种设计模式，主要用于解决不同接口之间的兼容问题。想象一下，你有一个电器（比如手机充电器），但插座的接口不匹配，这时你就需要一个适配器（转换插头）来连接它们。适配器模式就是在软件中实现类似的功能，让不兼容的类能够一起工作。

美国的插头 ---> 🔌 插头转换器 --> 中国的插座

## 适配器模式的核心思想

- 接口转换：将一个接口转换成另一个接口。
- 兼容性：让原本不兼容的类能够协同工作。
- 不修改原有代码：在不修改现有代码的情况下实现接口兼容。

## 适配器模式的结构

适配器模式通常包含以下几个关键角色：

- 目标接口（Target）：客户端期望使用的接口。
- 适配者（Adaptee）：需要被适配的现有接口。
- 适配器（Adapter）：将适配者接口转换为目标接口。

## 代码示例

### 适配器模式示例

```js
// Google Map 对象
var googleMap = {
  show: function () {
    console.log('Google Map: 显示地图');
  },
};

// Baidu Map 对象
var baiduMap = {
  display: function () {
    console.log('Baidu Map: 显示地图');
  },
};

// 渲染函数
var rendMap = function (map) {
  if (map.show instanceof Function) {
    map.show();
  }
};

// Baidu Map 适配器
var baiduMapAdapter = {
  show: function () {
    return baiduMap.display();
  },
};

// 使用示例
rendMap(googleMap); // 输出: Google Map: 显示地图
rendMap(baiduMapAdapter); // 输出: Baidu Map: 显示地图
```

- 不同接口：googleMap 和 baiduMap 具有不同的方法名（show 和 display）。直接调用 rendMap 函数时，无法直接使用 baiduMap，因为它没有 show 方法。
- 这里适配器的作用：baiduMapAdapter 通过实现一个 show 方法，内部调用 baiduMap.display，使得 baiduMap 可以通过 rendMap 函数被调用。

## 场景

### 第三方库集成

当你需要将一个第三方库（如地图、支付、图表等）集成到你的应用中，但该库的接口与现有代码不兼容时，可以使用适配器模式。例如，使用 Google Maps API 和 Baidu Maps API 时，可以通过适配器将它们统一到一个接口上。

### 遗留系统

在维护或升级遗留系统时，可能需要与新系统或新组件进行交互。适配器模式可以帮助将旧系统的接口适配到新系统的要求，避免对旧系统进行大规模修改。

### 不同数据源

当你的应用需要从多个不同的数据源（如数据库、API、文件等）获取数据，而这些数据源的接口不一致时，可以使用适配器模式来统一数据访问接口。

### API 版本兼容

当一个 API 更新了接口，但你仍然需要支持旧版本的客户端时，可以使用适配器模式来适配新旧接口，确保旧客户端能够正常工作。

## 优缺点

### 优点

#### 提高代码复用性

适配器模式允许重用现有的类，而不需要修改它们的代码。通过适配器，可以将不同的接口整合到一起，增强代码的复用性。

#### 增强灵活性

适配器模式使得系统能够灵活地支持不同的接口。只需创建新的适配器即可支持新的类，而不需要修改客户端代码。

#### 降低耦合性

客户端代码与具体实现解耦，适配器充当了中介，减少了系统各部分之间的依赖关系。这使得系统更易于维护和扩展。

#### 统一接口

通过适配器，可以将不同的接口统一为一个标准接口，简化了客户端的使用逻辑，提升了代码的可读性。

### 缺点

#### 增加系统复杂性

适配器模式可能会引入额外的类和接口，增加系统的复杂性，尤其是在适配器数量较多时，可能会导致代码难以理解。

#### 性能开销

适配器模式可能会引入额外的调用层次，导致性能开销，尤其是在高频调用的场景中。

### 可读性下降

适配器的存在可能会使得代码逻辑变得不那么直观，特别是对于不熟悉适配器模式的开发者来说，理解适配器的作用可能需要额外的时间。

### 过度设计

在某些情况下，使用适配器模式可能会被视为过度设计。如果系统的接口不复杂，使用适配器可能显得多余。

## 适配者模式和中介模式的区别

- 适配器模式: 主要解决接口不兼容的问题，使得不同接口的类能够协同工作。
- 中介模式: 主要解决对象之间的复杂交互问题，通过中介者来简化对象之间的通信。

## 总结

适配器模式在处理接口不兼容问题时非常有效，能够提高代码的灵活性和可复用性。然而，开发者在使用时需要权衡其带来的复杂性和性能开销，确保在合适的场景下使用适配器模式。
